!function(t){function e(e){for(var a,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],r[s]&&p.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(l&&l(e);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={3:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([314,0]),n()}({16:function(t,e,n){"use strict";var a=n(136),r=n.n(a),o={props:["text"],data:function(){return{}},watch:{text:function(t,e){this.load()}},methods:{load:function(){this.$el.innerHTML=r.a.toSvg(this.$props.text,200)}},mounted:function(){this.load()}},s=(n(257),n(0)),i=Object(s.a)(o,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"identicon"})},[],!1,null,null,null);i.options.__file="Identicon.vue";e.a=i.exports},243:function(t,e,n){},245:function(t,e,n){"use strict";var a=n(45);n.n(a).a},247:function(t,e,n){"use strict";var a=n(46);n.n(a).a},249:function(t,e,n){"use strict";var a=n(47);n.n(a).a},251:function(t,e,n){"use strict";var a=n(48);n.n(a).a},253:function(t,e,n){"use strict";var a=n(49);n.n(a).a},255:function(t,e,n){"use strict";var a=n(50);n.n(a).a},257:function(t,e,n){"use strict";var a=n(51);n.n(a).a},259:function(t,e,n){"use strict";var a=n(52);n.n(a).a},261:function(t,e,n){"use strict";var a=n(53);n.n(a).a},284:function(t,e,n){"use strict";var a=n(54);n.n(a).a},286:function(t,e,n){"use strict";var a=n(55);n.n(a).a},288:function(t,e,n){"use strict";var a=n(57);n.n(a).a},290:function(t,e,n){"use strict";var a=n(58);n.n(a).a},292:function(t,e,n){"use strict";var a=n(60);n.n(a).a},294:function(t,e,n){var a={"./ko":133,"./ko.js":133};function r(t){var e=o(t);return n(e)}function o(t){var e=a[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=294},295:function(t,e,n){"use strict";var a=n(62);n.n(a).a},297:function(t,e,n){"use strict";var a=n(63);n.n(a).a},299:function(t,e,n){"use strict";var a=n(64);n.n(a).a},301:function(t,e,n){"use strict";var a=n(65);n.n(a).a},303:function(t,e,n){"use strict";var a=n(66);n.n(a).a},305:function(t,e,n){"use strict";var a=n(67);n.n(a).a},307:function(t,e,n){"use strict";var a=n(68);n.n(a).a},309:function(t,e,n){"use strict";var a=n(69);n.n(a).a},311:function(t,e,n){"use strict";var a=n(70);n.n(a).a},314:function(t,e,n){"use strict";n.r(e);n(88),n(243);var a=n(19),r=n.n(a),o=n(71),s=n.n(o),i=n(72),c=n.n(i),u=n(14);function l(t){return new Promise(function(e,n){console.log("connecting to background...");var a=new u.EventEmitter,r=c()({sendUpdate:function(t){a.emit("update",t)}});t.pipe(r).pipe(t),r.once("remote",function(t){console.log("connected to remote"),t.on=a.on.bind(a),e(t)})})}var d=n(9),p=n(4),v=n(15);function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=null,h={data:function(){return{status:"load",blockHeight:0,chainId:""}},created:function(){this.updateStatus()},beforeDestroy:function(){},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){f(t,e,n[e])})}return t}({},Object(v.b)({activeChainId:function(t){return t.navigation.activeAccount.chainId}}),{networkStatusClass:function(){return"network-".concat(this.status)},networkStatusLabel:function(){return{ok:"connected",fail:"disconnected",load:"connecting..."}[this.status]}}),watch:{activeChainId:function(){this.status="load",this.updateStatus()}},methods:{updateStatus:function(){var t=this;m&&clearTimeout(m),Object(p.a)(this.$background.getBlockchainStatus)({chainId:this.activeChainId}).then(function(e){t.status="ok",t.blockHeight=e.blockHeight,t.chainId=e.chainId,m=setTimeout(function(){t.updateStatus()},5e3)}).catch(function(e){t.status="fail",console.error("Could not connect to blockchain.",e),m=setTimeout(function(){t.updateStatus()},3e4)})}},components:{}},y=(n(245),n(0)),_=Object(y.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"network-selector",attrs:{title:t.blockHeight}},[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.networkStatusLabel,expression:"networkStatusLabel"}],staticClass:"network-icon tooltipped tooltipped-no-delay tooltipped-n",class:t.networkStatusClass}),t._v("\n  "+t._s(t.chainId)+"\n  (#"+t._s(t.blockHeight)+")\n")])},[],!1,null,null,null);_.options.__file="NetworkSelector.vue";var g={data:function(){return{}},created:function(){},beforeDestroy:function(){},computed:{},methods:{openPopup:function(){chrome.tabs.create({url:"popup.html"})}},components:{NetworkSelector:_.exports}},w=(n(247),Object(y.a)(g,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"footer"}},[e("a",{attrs:{id:"logo",href:"https://aergo.io",target:"_blank"}}),this._v(" "),e("div",[e("span",{staticClass:"network-selector-label"},[this._v("Network")]),this._v(" "),e("NetworkSelector")],1)])},[],!1,null,null,null));w.options.__file="Footer.vue";var b=w.exports,x={name:"TransitionPage",data:function(){return{prevHeight:0,transitionName:"fade",transitionMode:"out-in",transitionEnterActiveClass:""}},created:function(){var t=this;this.$router.beforeEach(function(e,n,a){t.transitionMode="out-in";var r=n.meta.transitionName||e.meta.transitionName||"fade",o=n.path.split("/").length-e.path.split("/").length,s=(e.meta.index||0)-(n.meta.index||0);o>0&&(r=e.meta.transitionName),o<0&&(r=n.meta.transitionName),"slide"===r&&(r=s<0||o>0?"slide-right":"slide-left"),"slide-vertical"===r&&(r=o>0?"slide-vertical-down":"slide-vertical-up",t.transitionMode=""),t.transitionEnterActiveClass="".concat(r,"-enter-active"),"zoom"===e.meta.transitionName&&(t.transitionMode="in-out",t.transitionEnterActiveClass="zoom-enter-active",document.body.style.overflow="hidden"),"zoom"===n.meta.transitionName&&(t.transitionMode=null,t.transitionEnterActiveClass=null,document.body.style.overflow=null),t.transitionName=r,a()})},methods:{beforeLeave:function(t){this.prevHeight=getComputedStyle(t).height},enter:function(t){var e=getComputedStyle(t).height;t.style.height=this.prevHeight,setTimeout(function(){t.style.height=e})},afterEnter:function(t){t.style.height="auto","page"==t.className&&(t.style.height="100%")}}},k=(n(249),Object(y.a)(x,function(){var t=this.$createElement;return(this._self._c||t)("transition",{attrs:{name:this.transitionName,mode:this.transitionMode,"enter-active-class":this.transitionEnterActiveClass},on:{beforeLeave:this.beforeLeave,enter:this.enter,afterEnter:this.afterEnter}},[this._t("default")],2)},[],!1,null,null,null));k.options.__file="TransitionPage.vue";var C=k.exports;function A(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}var O={data:function(){return{unlocked:!1}},created:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){A(o,a,r,s,i,"next",t)}function i(t){A(o,a,r,s,i,"throw",t)}s(void 0)})}}(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.a)(this.$background.isUnlocked)();case 2:e=t.sent,console.log("unlocked",e),this.unlocked=e,this.unlocked||this.$router.push("/locked");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeDestroy:function(){},computed:{},methods:{},components:{Footer:b,TransitionPage:C}},$=(n(251),Object(y.a)(O,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"page-container"},[e("TransitionPage",[e("router-view")],1)],1),this._v(" "),e("Footer")],1)},[],!1,null,null,null));$.options.__file="Popup.vue";var P=$.exports,S=n(87),T={name:"Dialog",props:[],data:function(){return{}}},I=(n(253),Object(y.a)(T,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dialog"},[e("div",{staticClass:"dialog-content"},[this._t("default")],2)])},[],!1,null,null,null));I.options.__file="Dialog.vue";var R=I.exports;function j(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function N(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){j(o,a,r,s,i,"next",t)}function i(t){j(o,a,r,s,i,"throw",t)}s(void 0)})}}var E={props:[],data:function(){return{initialized:!1,setupVisible:!1,password:"",error:null}},created:function(){var t=N(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$db.open();case 2:return t.next=4,this.$db.getIndex("settings").get("encryptedId");case 4:this.initialized=!!t.sent,console.log("wallet initialized",this.initialized);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mounted:function(){},beforeDestroy:function(){},computed:{},methods:{reset:function(){this.$router.push("/reset")},showSetup:function(){var t=this;this.setupVisible=!0,setTimeout(function(){t.$refs.passwordField.focus()},1)},setup:function(){var t=N(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.error=null,this.password){t.next=4;break}return this.error="Password cannot be empty",t.abrupt("return");case 4:return t.next=6,Object(p.a)(this.$background.setup)({password:this.password});case 6:this.initialized=!0,this.password="",this.$router.push("/");case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),unlock:function(){var t=N(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.error=null,this.password){t.next=4;break}return this.error="Password cannot be empty",t.abrupt("return");case 4:return t.next=6,Object(p.a)(this.$background.unlock)({password:this.password});case 6:if(!("error"in(e=t.sent))){t.next=10;break}return this.error=e.error,t.abrupt("return");case 10:"/locked"===(n=this.$store.state.navigation.previousPath||"/")&&(n="/"),console.log("going to ",n),this.$router.push(n);case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},components:{Dialog:R}},F=(n(255),Object(y.a)(E,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},[n("Dialog",[t.initialized?n("div",[n("div",{staticClass:"icon icon-lock"}),t._v(" "),n("h1",[t._v("Your wallet is locked.")]),t._v(" "),n("p",[t._v("Enter your wallet passphrase to unlock.")]),t._v(" "),n("form",{staticClass:"form",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.unlock(e)}}},[n("div",{staticClass:"form-actions"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"wallet-password",attrs:{type:"password",autofocus:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("Button",{attrs:{text:"Unlock",primary:"true"},nativeOn:{click:function(e){return t.unlock(e)}}}),t._v(" "),n("Button",{staticClass:"secondary",attrs:{text:"Reset wallet"},nativeOn:{click:function(e){return t.reset(e)}}}),t._v(" "),t.error?n("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()],1)])]):t._e(),t._v(" "),t.initialized||t.setupVisible?t._e():n("div",[n("div",{staticClass:"logo"}),t._v(" "),n("h1",[t._v("Welcome to Aergo Connect.")]),t._v(" "),n("p",[t._v("A secure wallet to manage your Aergo accounts in the browser.")]),t._v(" "),n("form",{staticClass:"form",attrs:{autocomplete:"off"}},[n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"Get started",primary:"true"},nativeOn:{click:function(e){return t.showSetup(e)}}})],1)])]),t._v(" "),n("transition",{attrs:{name:"fade"}},[!t.initialized&&t.setupVisible?n("div",[n("div",{staticClass:"icon icon-lock"}),t._v(" "),n("h1",[t._v("Set up your new wallet.")]),t._v(" "),n("p",[t._v("To get started, please configure a passphrase for your wallet. This passphrase will be used to secure all your accounts.")]),t._v(" "),n("form",{staticClass:"form",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.setup(e)}}},[n("div",{staticClass:"form-actions"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"passwordField",staticClass:"wallet-password",attrs:{type:"password",autofocus:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("Button",{attrs:{text:"Set passphrase",primary:"true"},nativeOn:{click:function(e){return t.setup(e)}}}),t._v(" "),t.error?n("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()],1)])]):t._e()])],1)],1)},[],!1,null,"53e44288",null));F.options.__file="Lockscreen.vue";var U=F.exports,B={"aergo.io":{apiUrl:"https://api.aergoscan.io/main",explorerUrl:"https://mainnet.aergoscan.io"},"testnet.aergo.io":{apiUrl:"https://api.aergoscan.io/testnet",explorerUrl:"https://testnet.aergoscan.io"}};function D(t){var e=B[t];return void 0===e?{apiUrl:function(){return""},explorerUrl:function(){return""}}:{apiUrl:function(t){return"".concat(e.apiUrl).concat(t)},explorerUrl:function(t){return"".concat(e.explorerUrl).concat(t)}}}var M=n(16),H=n(6);function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var z={data:function(){return{accountMenuShown:!1}},created:function(){var t=this;this.$store.dispatch("accounts/getAccounts"),Object(p.a)(this.$background.isUnlocked)().then(function(e){console.log("unlocked",e),t.unlocked=e,t.unlocked||t.$router.push("/locked")})},beforeDestroy:function(){},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){L(t,e,n[e])})}return t}({},Object(v.b)({accounts:function(t){var e=t.accounts.addresses.map(function(e){return t.accounts.accounts[e]});return e.sort(function(t,e){return t.data?-new H.Amount(t.data.balance).compare(new H.Amount(e.data.balance)):0}),e.sort(function(t,e){return t.data?t.data.spec.chainId.localeCompare(e.data.spec.chainId):0}),e}}),{accountsByChainId:function(){var t=function(t,e){var n=e;"string"==typeof e&&(n=function(t){return t[e]});var a=new Map,r=!0,o=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value,l=n(u);a.has(l)||a.set(l,[]),a.get(l).push(u)}}catch(t){o=!0,s=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}return a}(this.accounts,function(t){return t&&t.data?t.data.spec.chainId:""});return Array.from(t)}}),methods:{explorerUrl:function(t){return D(t.data.spec.chainId).explorerUrl("/account/".concat(t.data.spec.address))},gotoExplorer:function(t){window.open(this.explorerUrl(t))},gotoExport:function(t){this.$router.push("/account/".concat(encodeURIComponent(t.key),"/export"))},gotoRemove:function(t){this.$router.push("/account/".concat(encodeURIComponent(t.key),"/remove"))},showAccountMenu:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.accountMenuShown=t},openPopup:function(){chrome.tabs.create({url:"popup.html"})},formatAmount:function(t){return t?new H.Amount(t).toUnit("aergo").toString():"0 aergo"}},components:{Identicon:M.a}},K=(n(259),Object(y.a)(z,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide"}},[n("div",{staticClass:"page"},[n("div",{staticClass:"seperator top"}),t._v(" "),n("div",{staticClass:"account-list-header"},[t._v("Select Active Account")]),t._v(" "),n("div",{staticClass:"scroll-view"},[n("ul",{staticClass:"account-list"},[n("li",[n("router-link",{attrs:{to:"/add-account/"}},[n("div",{staticClass:"account-item add-account"},[t._v("\n              Add Account\n            ")])])],1),t._v(" "),t._l(t.accountsByChainId,function(e){var a=e[0],r=e[1];return[n("li",{key:a,staticClass:"chainid-seperator"},[n("span",{staticClass:"chain"},[t._v(t._s(a))])]),t._v(" "),t._l(r,function(e){return n("li",{key:e.key,on:{mouseout:function(e){if(e.target!==e.currentTarget)return null;t.showAccountMenu(!1)}}},[n("router-link",{attrs:{to:"/account/"+encodeURIComponent(e.key)+"/"}},[n("div",{staticClass:"account-item"},[n("Identicon",{attrs:{text:e.data.spec.address}}),t._v(" "),n("span",[n("span",{staticClass:"account-name"},[t._v("Account")]),t._v(" "),e&&e.data?n("span",{staticClass:"account-balance"},[t._v(t._s(t.formatAmount(e.data.balance)))]):t._e(),n("br"),t._v(" "),n("span",{staticClass:"account-address-chain"},[n("span",{staticClass:"address"},[t._v(t._s(t._f("shortAddress")(e.data.spec.address,18)))])])]),t._v(" "),n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"More actions",expression:"'More actions'"}],staticClass:"btn-action tooltipped tooltipped-no-delay tooltipped-w",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showAccountMenu(e)}}}),t._v(" "),n("span",{staticClass:"account-menu",class:{visible:t.accountMenuShown}},[n("ul",{staticClass:"account-menu-items"},[t.explorerUrl(e)?n("li",{on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.gotoExplorer(e)}}},[t._v("View in Aergoscan")]):t._e(),t._v(" "),n("li",{on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.gotoExport(e)}}},[t._v("Export")]),t._v(" "),n("li",{on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.gotoRemove(e)}}},[t._v("Remove")])])])],1)])],1)})]})],2)])])])},[],!1,null,null,null));K.options.__file="Accounts.vue";var V=K.exports;function Y(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function Q(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){Y(o,a,r,s,i,"next",t)}function i(t){Y(o,a,r,s,i,"throw",t)}s(void 0)})}}var G={data:function(){return{account:{},timeout:null}},created:function(){},mounted:function(){var t=Q(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadState();case 2:this.reloadState();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeDestroy:function(){clearTimeout(this.timeout)},methods:{formatAmount:function(t){return new H.Amount(t).toUnit("aergo").toString()},loadState:function(){var t=Q(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$db.open();case 2:return t.prev=2,t.next=5,this.$db.getIndex("accounts").get(this.$route.params.address);case 5:this.account=t.sent,console.log("loaded account from db",this.account),this.timeout=setTimeout(function(){e.loadState()},1e4),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this.$router.push("/");case 13:case"end":return t.stop()}},t,this,[[2,10]])}));return function(){return t.apply(this,arguments)}}(),reloadState:function(){var t=Q(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.account&&this.account.data){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$db.open();case 4:return t.next=6,this.$store.dispatch("accounts/loadAccount",this.account.data.spec);case 6:this.account=t.sent;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},components:{TransitionPage:C,Identicon:M.a}},J=(n(261),Object(y.a)(G,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"seperator top"}),t._v(" "),n("div",{staticClass:"account-header"},[n("div",{staticClass:"account-item"},[t.account&&t.account.data?n("Identicon",{attrs:{text:t.account.data.spec.address}}):t._e(),t._v(" "),n("span",[n("span",{staticClass:"account-name"},[t._v("Account")]),t._v(" "),t.account&&t.account.data?n("span",{staticClass:"account-balance"},[t._v(t._s(t.formatAmount(t.account.data.balance)))]):t._e(),n("br"),t._v(" "),t.account&&t.account.data?n("span",{staticClass:"account-address-chain"},[n("span",{staticClass:"address"},[t._v(t._s(t._f("shortAddress")(t.account.data.spec.address,18)))]),t._v(" "),n("span",{staticClass:"chain"},[t._v(t._s(t.account.data.spec.chainId))])]):t._e()])],1),t._v(" "),n("router-link",{staticClass:"menu-link",attrs:{to:"/"}})],1),t._v(" "),n("div",{staticClass:"seperator"}),t._v(" "),n("ul",{staticClass:"account-nav"},[n("li",[n("router-link",{attrs:{to:"./"}},[n("span",[t._v("Deposit")])])],1),t._v(" "),n("li",[n("router-link",{attrs:{to:"send"}},[n("span",[t._v("Send")])])],1),t._v(" "),n("li",[n("router-link",{attrs:{to:"sign"}},[n("span",[t._v("Sign")])])],1),t._v(" "),n("li",[n("router-link",{attrs:{to:"history"}},[n("span",[t._v("History")])])],1)]),t._v(" "),n("div",{staticClass:"account-subpage"},[n("TransitionPage",[n("router-view")],1)],1)])},[],!1,null,null,null));J.options.__file="Account.vue";var q=J.exports,W=n(137),X=n.n(W);function Z(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}var tt={props:["data"],data:function(){return{}},mounted:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){Z(o,a,r,s,i,"next",t)}function i(t){Z(o,a,r,s,i,"throw",t)}s(void 0)})}}(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.a.toString(this.$props.data);case 2:this.$el.innerHTML=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},et=(n(284),Object(y.a)(tt,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"qrcode"})},[],!1,null,null,null));et.options.__file="QRCode.vue";var nt={data:function(){return{}},created:function(){},beforeDestroy:function(){},computed:{chainId:function(){return this.$route.params.address&&this.$route.params.address.split("/")[0]},address:function(){return this.$route.params.address&&this.$route.params.address.split("/")[1]}},methods:{},components:{QRCode:et.exports}},at=(n(286),Object(y.a)(nt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},[n("div",{staticClass:"qrcode-container"},[n("QRCode",{attrs:{data:t.$route.params.address}})],1),t._v(" "),n("p",{staticClass:"instruction"},[t._v("\n    You can directly deposit to this address.\n  ")]),t._v(" "),n("p",{staticClass:"instruction instruction-address"},[n("span",{staticClass:"chain"},[t._v(t._s(t.chainId))]),n("br"),t._v(t._s(t.address))])])},[],!1,null,null,null));at.options.__file="Deposit.vue";var rt=at.exports,ot=n(56).a,st=(n(290),Object(y.a)(ot,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},[n("div",{staticClass:"overlay-dialog",class:{visible:"sending"==t.status}},[n("div",{staticClass:"loading-wrap"},[n("Spinner",{attrs:{size:"30"}})],1),t._v(" "),t.slowQuery?n("div",[t._v("\n      Sending is taking longer than usual."),n("br"),t._v("You can wait or cancel the transaction.\n      "),n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"Cancel",primary:"true"},nativeOn:{click:function(e){return t.cancelSend(e)}}})],1)]):t._e()]),t._v(" "),n("div",{staticClass:"overlay-dialog",class:{visible:"success"==t.status}},[n("span",{staticClass:"icon icon-success"}),t._v(" "),n("h2",[t._v("The transaction has been sent.")]),t._v(" "),t.signedTx?n("p",[n("strong",[t._v("Hash: "+t._s(t.lastTxHash))]),n("br"),t._v("\n      From: "+t._s(t.signedTx.fromAdr)),n("br"),t._v("\n      To: "+t._s(t.signedTx.to)),n("br"),t._v("\n      Amount: "+t._s(t.signedTx.amount)+"\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"OK",primary:"true"},nativeOn:{click:function(e){return t.cancel(e)}}})],1)]),t._v(" "),n("div",{staticClass:"overlay-dialog",class:{visible:"error"==t.status}},[n("span",{staticClass:"icon icon-fail"}),t._v(" "),n("h2",[t._v("An error occured.")]),t._v(" "),n("p",{staticClass:"error"},[t._v(t._s(t.error))]),t._v(" "),n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"Go back",primary:"true"},nativeOn:{click:function(e){return t.cancel(e)}}})],1)]),t._v(" "),n("div",{staticClass:"overlay-dialog",class:{visible:"confirm"==t.status}},[n("h2",[t._v("Please confirm this transaction.")]),t._v(" "),t.signedTx?n("p",{staticClass:"tx-verify"},[t._v("\n      From: "),n("Identicon",{attrs:{text:t.signedTx.fromAdr}}),t._v(" "+t._s(t.signedTx.fromAdr)),n("br"),t._v("\n      To: "),n("Identicon",{attrs:{text:t.signedTx.to}}),t._v(" "+t._s(t.signedTx.to)),n("br"),t._v("\n      Amount: "+t._s(t.signedTx.amount)+"\n    ")],1):t._e(),t._v(" "),n("div",{staticClass:"form-actions"},[t.error?n("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t._v(" "),t.error?t._e():n("div",[n("Button",{attrs:{text:"Confirm",primary:"true"},nativeOn:{click:function(e){return t.confirm(e)}}}),t._v(" "),n("Button",{staticClass:"secondary",attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancel(e)}}})],1),t._v(" "),t.error?n("div",[n("Button",{attrs:{text:"Go back",primary:"true"},nativeOn:{click:function(e){return t.cancel(e)}}})],1):t._e()])]),t._v(" "),n("form",{staticClass:"form",attrs:{autocomplete:"off"}},[n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Type\n\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.transaction.uiType,expression:"transaction.uiType"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.transaction,"uiType",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("Normal")]),t._v(" "),n("option",{attrs:{value:"aergo.name"}},[t._v("Name System")]),t._v(" "),n("option",{attrs:{value:"aergo.system"}},[t._v("Staking & Voting")])])])]),t._v(" "),n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Recipient\n\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.to,expression:"transaction.to"}],ref:"address",staticClass:"text-input input-field",attrs:{type:"text",disabled:""!==t.transaction.uiType},domProps:{value:t.transaction.to},on:{input:function(e){e.target.composing||t.$set(t.transaction,"to",e.target.value)}}})])]),t._v(" "),"system"==t.payloadFormState?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Currently staked amount\n\n        "),n("span",[t._v("\n            "+t._s(t.stakedAmount)+"\n        ")])])]):t._e(),t._v(" "),"system"==t.payloadFormState?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Action\n\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.payload.action,expression:"payload.action"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.payload,"action",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("Please select...")]),t._v(" "),n("option",{attrs:{value:"s"}},[t._v("Stake")]),t._v(" "),n("option",{attrs:{value:"u"}},[t._v("Unstake")]),t._v(" "),n("option",{attrs:{value:"v"}},[t._v("Vote")])])])]):t._e(),t._v(" "),"system"==t.payloadFormState&&"s"==t.payload.action?n("div",{staticClass:"form-line action-hint"},[t._v("\n      The specified amount will be staked. \n    ")]):t._e(),t._v(" "),"system"==t.payloadFormState&&"u"==t.payload.action?n("div",{staticClass:"form-line action-hint"},[t._v("\n      The specified amount will be unstaked. \n    ")]):t._e(),t._v(" "),"system"==t.payloadFormState&&"v"==t.payload.action?n("div",{staticClass:"form-line action-hint"},[t._v("\n      Your vote (weighted by previously staked amount)"),n("br"),t._v("will be cast for the specified BPs.\n      "),n("label",[t._v("\n        Action\n\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.payload.subAction,expression:"payload.subAction"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.payload,"subAction",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"b"}},[t._v("BP")]),t._v(" "),n("option",{attrs:{value:"p"}},[t._v("DAO")])])])]):t._e(),t._v(" "),"system"==t.payloadFormState&&"v"==t.payload.action&&"b"==t.payload.subAction?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        BP ids\n\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.payload.voteTo,expression:"payload.voteTo"}],staticClass:"text-input input-field",attrs:{type:"text",placeholder:"Comma-seperated peer ids"},domProps:{value:t.payload.voteTo},on:{input:function(e){e.target.composing||t.$set(t.payload,"voteTo",e.target.value)}}})])]):t._e(),t._v(" "),"system"==t.payloadFormState&&"v"==t.payload.action&&"p"==t.payload.subAction?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Vote to\n\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.payload.voteTo,expression:"payload.voteTo"}],staticClass:"text-input input-field",attrs:{type:"text",placeholder:"Comma-seperated id and candidates"},domProps:{value:t.payload.voteTo},on:{input:function(e){e.target.composing||t.$set(t.payload,"voteTo",e.target.value)}}})])]):t._e(),t._v(" "),"name"==t.payloadFormState?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Action\n\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.payload.action,expression:"payload.action"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.payload,"action",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("Please select...")]),t._v(" "),n("option",{attrs:{value:"c"}},[t._v("Create")]),t._v(" "),n("option",{attrs:{value:"u"}},[t._v("Update")])])])]):t._e(),t._v(" "),"name"==t.payloadFormState&&"c"==t.payload.action?n("div",{staticClass:"form-line action-hint"},[t._v("\n      A new name will be assigned to your account. \n    ")]):t._e(),t._v(" "),"name"==t.payloadFormState&&"u"==t.payload.action?n("div",{staticClass:"form-line action-hint"},[t._v("\n      The name's owner will be updated. \n    ")]):t._e(),t._v(" "),"name"==t.payloadFormState&&""!==t.payload.action?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Name\n\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.payload.name,expression:"payload.name"}],staticClass:"text-input input-field",attrs:{type:"text",placeholder:"Alphanumerical, 12 characters"},domProps:{value:t.payload.name},on:{input:function(e){e.target.composing||t.$set(t.payload,"name",e.target.value)}}})])]):t._e(),t._v(" "),"name"==t.payloadFormState&&"u"===t.payload.action?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        New owner\n\n        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.payload.newOwner,expression:"payload.newOwner"}],staticClass:"text-input input-field",attrs:{type:"text"},domProps:{value:t.payload.newOwner},on:{input:function(e){e.target.composing||t.$set(t.payload,"newOwner",e.target.value)}}})])]):t._e(),t._v(" "),""==t.transaction.uiType||""!==t.payload.action?n("div",{staticClass:"form-line"},[n("label",[t._v("\n        Amount\n\n        "),n("span",{staticClass:"input-field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.amount,expression:"transaction.amount"}],staticClass:"text-input",attrs:{type:"number",disabled:t.amountFixed},domProps:{value:t.transaction.amount},on:{input:function(e){e.target.composing||t.$set(t.transaction,"amount",e.target.value)}}}),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.transaction.amountUnit,expression:"transaction.amountUnit"}],attrs:{disabled:t.amountFixed},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.transaction,"amountUnit",e.target.multiple?n:n[0])}}},[n("option",[t._v("aergo")]),t._v(" "),n("option",[t._v("gaer")]),t._v(" "),n("option",[t._v("aer")])])])])]):t._e(),t._v(" "),"hidden"==t.payloadFormState?n("div",{staticClass:"form-line"},[n("Button",{staticClass:"secondary",attrs:{text:"Add data"},nativeOn:{click:function(e){return t.addPayload(e)}}})],1):t._e(),t._v(" "),"manual"==t.payloadFormState?n("div",{staticClass:"form-line vertical"},[n("label",[t._v("\n        Data\n\n        "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.transaction.payload,expression:"transaction.payload"}],staticClass:"text-input",domProps:{value:t.transaction.payload},on:{input:function(e){e.target.composing||t.$set(t.transaction,"payload",e.target.value)}}})])]):t._e(),t._v(" "),n("div",{staticClass:"form-actions"},[t.error?n("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t._v(" "),n("Button",{attrs:{text:"Continue",primary:"true"},nativeOn:{click:function(e){return t.startConfirm(e)}}}),t._v(" "),n("Button",{staticClass:"secondary",attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancel(e)}}})],1)])])},[],!1,null,null,null));st.options.__file="Send.vue";var it=st.exports,ct=n(59).a,ut=(n(292),Object(y.a)(ct,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},[n("form",{staticClass:"form",attrs:{autocomplete:"off"}},[n("div",{staticClass:"form-line vertical"},[n("label",[t._v("\n        Message\n\n        "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"text-input",staticStyle:{height:"80px"},attrs:{placeholder:"Enter hex string (0x...) or text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"form-actions"},[t.error?n("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t._v(" "),n("Button",{attrs:{text:"Sign",primary:"true"},nativeOn:{click:function(e){return t.sign(e)}}}),t._v(" "),n("Button",{staticClass:"secondary",attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancel(e)}}})],1),t._v(" "),t.signedMessage?n("div",{staticClass:"form-line vertical"},[n("label",[t._v("\n        Signed message\n\n        "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.signedMessage,expression:"signedMessage"}],staticClass:"text-input",staticStyle:{height:"60px"},attrs:{readonly:""},domProps:{value:t.signedMessage},on:{input:function(e){e.target.composing||(t.signedMessage=e.target.value)}}})])]):t._e(),t._v(" "),n("p",[t._v("\n      A signature is a cryptographic proof that a message is authorized by an account.\n      Signatures can be used to perform certain actions on your behalf.  \n    ")])])])},[],!1,null,null,null));ut.options.__file="Sign.vue";var lt=ut.exports,dt=n(61),pt=n.n(dt),vt=n(35),ft=n(34);function mt(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function ht(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){mt(o,a,r,s,i,"next",t)}function i(t){mt(o,a,r,s,i,"throw",t)}s(void 0)})}}var yt={data:function(){return{transactions:[],state:"initial"}},created:function(){},mounted:function(){this.load()},beforeDestroy:function(){},computed:{address:function(){return this.$route.params.address&&this.$route.params.address.split("/")[1]},chainId:function(){return this.$route.params.address&&this.$route.params.address.split("/")[0]}},components:{Spinner:vt.a},methods:{moment:pt.a,explorerLink:function(t){return D(t.data.chainId).explorerUrl("/transaction/".concat(t.data.hash))},reload:function(){var t=ht(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Loading txs"),t.prev=1,t.next=4,Object(ft.a)(function(){return e.$store.dispatch("accounts/getAccountTx",{address:e.address,chainId:e.chainId})},{fastTime:1500});case 4:this.transactions=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),this.state="error",console.error(t.t0);case 11:setTimeout(function(){return e.reload()},1e4);case 12:case"end":return t.stop()}},t,this,[[1,7]])}));return function(){return t.apply(this,arguments)}}(),load:function(){var t=ht(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.state="loading",t.next=3,this.reload();case 3:this.state="loaded";case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},_t=(n(295),Object(y.a)(yt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},["loading"===t.state?n("div",{staticClass:"loading-wrap"},[n("Spinner",{attrs:{size:"30"}})],1):t._e(),t._v(" "),"loaded"===t.state?n("table",{staticClass:"tx-table"},[0===t.transactions.length?n("tr",[n("td",{staticClass:"empty-state"},[t._v("No transactions found.")])]):t._e(),t._v(" "),t._l(t.transactions,function(e){return n("tr",{key:e.hash,class:"status-"+e.data.status},[n("td",{attrs:{title:t.moment(e.data.ts)}},[t._v(t._s(t.moment(e.data.ts).fromNow()))]),t._v(" "),n("td",{staticClass:"address-amount"},[n("span",{staticClass:"address-amount-wrap"},[n("span",{staticClass:"address"},[e.data.to==e.data.from?n("span",{staticClass:"label"},[t._v("self-transfer")]):t._e(),t._v(" "),e.data.to!=e.data.from&&t.address==e.data.from?n("span",[n("span",{staticClass:"label label-negative"},[t._v("to")]),t._v(" "+t._s(t._f("shortAddress")(e.data.to,99)))]):t._e(),t._v(" "),e.data.to!=e.data.from&&t.address==e.data.to?n("span",[n("span",{staticClass:"label label-positive"},[t._v("from")]),t._v(" "+t._s(t._f("shortAddress")(e.data.from,99)))]):t._e()]),t._v(" "),n("span",{staticClass:"amount",domProps:{innerHTML:t._s(t.$options.filters.formatToken(e.data.amount))}})])]),t._v(" "),n("td",[t.explorerLink(e)?n("a",{staticClass:"icon icon-view",attrs:{href:t.explorerLink(e),target:"_blank"}},[t._v("view")]):t._e()])])})],2):t._e()])},[],!1,null,null,null));_t.options.__file="History.vue";var gt=_t.exports,wt={data:function(){return{name:"",password:""}},created:function(){},beforeDestroy:function(){},computed:{},mounted:function(){},methods:{cancel:function(){this.$router.push("/")}},components:{}},bt=(n(297),Object(y.a)(wt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide"}},[n("div",{staticClass:"page"},[n("div",{staticClass:"seperator top"}),t._v(" "),n("div",{staticClass:"account-list-header"},[t._v("Add Account")]),t._v(" "),n("div",{staticClass:"action-chooser"},[n("router-link",{attrs:{to:"/add-account/create"}},[t._v("Create new account")]),t._v(" "),n("router-link",{attrs:{to:"/add-account/import"}},[t._v("Import account")])],1),t._v(" "),n("div",{staticClass:"form-actions"},[n("Button",{staticClass:"secondary",attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancel(e)}}})],1)])])},[],!1,null,null,null));bt.options.__file="AddAccount.vue";var xt=bt.exports;function kt(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function Ct(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){kt(o,a,r,s,i,"next",t)}function i(t){kt(o,a,r,s,i,"throw",t)}s(void 0)})}}var At={data:function(){return{selection:"aergo.io",chainId:"",state:"initial",newAccount:{},error:""}},created:function(){},beforeDestroy:function(){},computed:{networkOptions:function(){return Object.keys(B)}},watch:{selection:function(){var t=Ct(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("other"!==e){t.next=14;break}if(n=prompt("Please enter the Chain ID")){t.next=5;break}return this.selection="aergo.io",t.abrupt("return");case 5:if(a=prompt("Please enter the node URL (e.g. http://127.0.0.1:7845)")){t.next=10;break}return this.selection="aergo.io",t.abrupt("return");case 10:return t.next=13,this.$store.dispatch("accounts/addNetwork",{chainId:n,nodeUrl:a});case 13:this.chainId=n;case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){},methods:{create:function(){var t=Ct(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"other"!==this.selection&&(this.chainId=this.selection),t.next=3,this.$store.dispatch("accounts/createAccount",{network:this.chainId});case 3:this.newAccount=t.sent,console.log("created account",this.newAccount,this.chainId),this.state="success";case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),gotoAccount:function(){var t=encodeURIComponent("".concat(this.chainId,"/").concat(this.newAccount.address));this.$router.push("/account/".concat(t,"/"))},cancel:function(){this.$router.push("/")}},components:{Identicon:M.a}},Ot=(n(299),Object(y.a)(At,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide"}},[n("div",{staticClass:"page"},[n("div",{staticClass:"seperator top"}),t._v(" "),n("div",{staticClass:"account-list-header"},[t._v("Create Account")]),t._v(" "),n("div",{staticClass:"scroll-view"},[n("div",{staticClass:"overlay-dialog create-result",class:{visible:"success"==t.state}},[n("span",{staticClass:"icon icon-success"}),t._v(" "),n("h2",[t._v("A new account has been created.")]),t._v(" "),n("p",[t._v("You can identify your account by its address or picture.")]),t._v(" "),n("Identicon",{attrs:{text:t.newAccount.address}}),t._v(" "),n("p",[t._v(t._s(t.newAccount.address))]),t._v(" "),n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"View account",primary:"true"},nativeOn:{click:function(e){return t.gotoAccount(e)}}})],1)],1),t._v(" "),"initial"==t.state?n("form",{staticClass:"form",attrs:{autocomplete:"off"}},[n("div",{staticClass:"form-line"},[n("label",[t._v("\n            Network\n\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selection,expression:"selection"}],staticClass:"text-input",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selection=e.target.multiple?n:n[0]}}},[t._l(t.networkOptions,function(e){return n("option",{key:e},[t._v(t._s(e))])}),t._v(" "),n("option",{attrs:{value:"other"}},[t._v("Other...")])],2)])]),t._v(" "),n("div",{staticClass:"form-actions"},[t.error?n("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t._v(" "),n("Button",{attrs:{text:"Create",primary:"true"},nativeOn:{click:function(e){return t.create(e)}}}),t._v(" "),n("Button",{staticClass:"secondary",attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancel(e)}}})],1)]):t._e()])])])},[],!1,null,null,null));Ot.options.__file="CreateAccount.vue";var $t=Ot.exports,Pt=n(12),St=n(44),Tt=n.n(St);function It(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function Rt(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){It(o,a,r,s,i,"next",t)}function i(t){It(o,a,r,s,i,"throw",t)}s(void 0)})}}var jt={data:function(){return{file:null,password:"",key:"",identity:null,error:"",keyType:"",importedAddress:"",selection:"aergo.io",chainId:""}},created:function(){},beforeDestroy:function(){},computed:{networkOptions:function(){return Object.keys(B)}},mounted:function(){},watch:{key:function(t){this.validateKey()},selection:function(){var t=Rt(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("other"!==e){t.next=14;break}if(n=prompt("Please enter the Chain ID")){t.next=5;break}return this.selection="aergo.io",t.abrupt("return");case 5:if(a=prompt("Please enter the node URL (e.g. http://127.0.0.1:7845)")){t.next=10;break}return this.selection="aergo.io",t.abrupt("return");case 10:return t.next=13,this.$store.dispatch("accounts/addNetwork",{chainId:n,nodeUrl:a});case 13:this.chainId=n;case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},methods:{importAccount:function(){var t=Rt(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("other"!==this.selection&&(this.chainId=this.selection),this.keyType){t.next=4;break}return this.error="Need to select either key file or paste text.",t.abrupt("return");case 4:if("encrypted"!==this.keyType){t.next=18;break}return e=Object(Pt.decodePrivateKey)(this.key),t.prev=6,t.next=9,Object(Pt.decryptPrivateKey)(e,this.password);case 9:n=t.sent,this.identity=Object(Pt.identifyFromPrivateKey)(n),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(6),console.log(t.t0),this.error="Could not decrypt private key. Wrong password?",t.abrupt("return");case 18:return t.next=20,this.$store.dispatch("accounts/importAccount",{identity:this.identity,network:this.chainId});case 20:if(!(a=t.sent).error){t.next=24;break}return this.error=""+a.error,t.abrupt("return");case 24:console.log("created account",a),this.importedAddress=a.address;case 26:case"end":return t.stop()}},t,this,[[6,13]])}));return function(){return t.apply(this,arguments)}}(),validateKey:function(){try{if(170!==Tt.a.decode(this.key)[0])return void(this.error="Invalid key format");this.keyType="encrypted"}catch(t){console.error("Invalid key: "+t),this.error="Invalid key format",this.keyType=""}},selectedFile:function(){var t=this;this.file=this.$refs.files.files[0];var e=new FileReader;e.onload=function(e){var n=e.target.result,a=new Uint8Array(n);t.identity=Object(Pt.identifyFromPrivateKey)(a),t.keyType="file"},e.readAsArrayBuffer(this.file)},gotoAccount:function(){var t=encodeURIComponent("".concat(this.chainId,"/").concat(this.importedAddress));this.$router.push("/account/".concat(t,"/"))},cancel:function(){this.$router.push("/")}},components:{Identicon:M.a}},Nt=(n(301),Object(y.a)(jt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide"}},[n("div",{staticClass:"page"},[n("div",{staticClass:"seperator top"}),t._v(" "),n("div",{staticClass:"account-list-header"},[t._v("Import Account")]),t._v(" "),n("div",{staticClass:"scroll-view"},[n("div",{staticClass:"overlay-dialog create-result",class:{visible:t.importedAddress}},[n("span",{staticClass:"icon icon-success"}),t._v(" "),n("h2",[t._v("The account has been imported.")]),t._v(" "),n("p",[t._v("You can identify your account by its address or picture.")]),t._v(" "),n("Identicon",{attrs:{text:t.importedAddress}}),t._v(" "),n("p",[t._v(t._s(t.importedAddress))]),t._v(" "),n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"View account",primary:"true"},nativeOn:{click:function(e){return t.gotoAccount(e)}}})],1)],1),t._v(" "),t.importedAddress?t._e():n("form",{staticClass:"form",attrs:{autocomplete:"off"}},[n("div",{staticClass:"form-line"},[n("label",[t._v("\n            Network\n\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selection,expression:"selection"}],staticClass:"text-input",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selection=e.target.multiple?n:n[0]}}},[t._l(t.networkOptions,function(e){return n("option",{key:e},[t._v(t._s(e))])}),t._v(" "),n("option",{attrs:{value:"other"}},[t._v("Other...")])],2)])]),t._v(" "),n("div",{staticClass:"form-line"},[n("label",[t._v("\n            Select file\n\n            "),n("input",{ref:"files",staticStyle:{width:"180px"},attrs:{type:"file",accept:".key"},on:{change:t.selectedFile}})])]),t._v(" "),n("div",{staticClass:"form-line"},[n("label",[t._v("\n            OR Paste exported key\n\n            "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],staticClass:"text-input",attrs:{type:"text"},domProps:{value:t.key},on:{input:function(e){e.target.composing||(t.key=e.target.value)}}})])]),t._v(" "),"encrypted"===t.keyType?n("div",{staticClass:"form-line"},[n("label",[t._v("\n            Password\n\n            "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text-input",attrs:{type:"password",autocomplete:"new-password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]):t._e(),t._v(" "),n("div",{staticClass:"form-actions"},[t.error?n("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t._v(" "),n("Button",{attrs:{text:"Import",primary:"true"},nativeOn:{click:function(e){return t.importAccount(e)}}}),t._v(" "),n("Button",{staticClass:"secondary",attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancel(e)}}})],1)])])])])},[],!1,null,null,null));Nt.options.__file="ImportAccount.vue";var Et=Nt.exports;function Ft(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}var Ut={props:[],data:function(){return{}},created:function(){this.$store.dispatch("accounts/getAccounts")},beforeDestroy:function(){},computed:Object(v.b)({accounts:function(t){return t.accounts.addresses.map(function(e){return t.accounts.accounts[e]})}}),methods:{reset:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){Ft(o,a,r,s,i,"next",t)}function i(t){Ft(o,a,r,s,i,"throw",t)}s(void 0)})}}(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm("Are you really sure you want to remove all accounts from this wallet?")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(p.a)(this.$background.reset)();case 5:this.$router.push("/locked");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(){this.$router.go(-1)}},components:{Dialog:R}},Bt=(n(303),Object(y.a)(Ut,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},[n("Dialog",[n("div",{staticClass:"icon icon-warning"}),t._v(" "),n("h1",[t._v("Reset wallet")]),t._v(" "),n("p",[t._v("Resetting your wallet will remove access to all your accounts.")]),t._v(" "),t.accounts.length?n("div",[n("p",[t._v("You will lose access to "+t._s(t.accounts.length)+" accounts saved in this wallet. Make sure you have a backup or don't need these accounts anymore.")]),t._v(" "),n("ol",{staticClass:"address-list"},t._l(t.accounts,function(e){return n("li",{key:e.key},[t._v(t._s(e.key))])}))]):t._e(),t._v(" "),n("form",{staticClass:"form",attrs:{autocomplete:"off"}},[n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"Reset wallet",primary:"true"},nativeOn:{click:function(e){return t.reset(e)}}}),t._v(" "),n("Button",{staticClass:"secondary",attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancel(e)}}})],1)])])],1)},[],!1,null,"70527d22",null));Bt.options.__file="Reset.vue";var Dt=Bt.exports;function Mt(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}var Ht={data:function(){return{state:"input",password:"",exportedPrivateKey:""}},methods:{exportAccount:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){Mt(o,a,r,s,i,"next",t)}function i(t){Mt(o,a,r,s,i,"throw",t)}s(void 0)})}}(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params.address.split("/")[0],n=this.$route.params.address.split("/")[1],t.next=4,this.$store.dispatch("accounts/exportAccount",{address:n,chainId:e,password:this.password});case 4:a=t.sent,this.exportedPrivateKey=a.privateKey,this.state="result";case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),goBack:function(){this.$router.push("/account/".concat(encodeURIComponent(this.$route.params.address),"/"))}},components:{Dialog:R}},Lt=(n(305),Object(y.a)(Ht,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},[n("Dialog",[n("h1",[t._v("Export account")]),t._v(" "),"input"==t.state?n("div",[n("p",[t._v("To export this account's private key,"),n("br"),t._v(" choose a passphrase for encryption.")]),t._v(" "),n("div",{staticClass:"form-actions"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"passwordField",staticClass:"wallet-password",attrs:{type:"password",placeholder:"Enter passphrase"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("Button",{attrs:{text:"Export",primary:"true"},nativeOn:{click:function(e){return t.exportAccount(e)}}})],1)]):t._e(),t._v(" "),"result"==t.state?n("div",[n("p",[t._v("You can now copy and save your encrypted private key.")]),t._v(" "),n("div",{staticClass:"export"},[t._v(t._s(t.exportedPrivateKey))]),t._v(" "),n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"Done",primary:"true"},nativeOn:{click:function(e){return t.goBack(e)}}})],1)]):t._e()])],1)},[],!1,null,"387ed6c3",null));Lt.options.__file="ExportAccount.vue";var zt=Lt.exports;function Kt(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}var Vt={data:function(){return{}},computed:{address:function(){return this.$route.params.address&&this.$route.params.address.split("/")[1]},chainId:function(){return this.$route.params.address&&this.$route.params.address.split("/")[0]}},methods:{remove:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){Kt(o,a,r,s,i,"next",t)}function i(t){Kt(o,a,r,s,i,"throw",t)}s(void 0)})}}(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm("Are you really sure you want to remove the account ".concat(this.$route.params.address," from this wallet?"))){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(p.a)(this.$background.removeAccount)({chainId:this.chainId,address:this.address});case 5:this.$router.push("/");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},components:{Dialog:R}},Yt=(n(307),Object(y.a)(Vt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroll-view"},[n("Dialog",[n("h1",[t._v("Remove account")]),t._v(" "),n("p",[t._v("This will remove access to this account in this wallet. Make sure you have a backup or don't need this account anymore.")]),t._v(" "),n("div",{staticClass:"form-actions"},[n("Button",{attrs:{text:"Remove",primary:"true"},nativeOn:{click:function(e){return t.remove(e)}}})],1)])],1)},[],!1,null,"2d984dd4",null));Yt.options.__file="RemoveAccount.vue";var Qt=[{path:"/locked",component:U,meta:{transitionName:"fade"}},{path:"/reset",component:Dt,meta:{transitionName:"fade"}},{path:"/",component:V,meta:{transitionName:"slide-vertical"}},{path:"/add-account/",component:xt,meta:{transitionName:"slide-vertical"}},{path:"/add-account/create/",component:$t,meta:{transitionName:"slide-vertical"}},{path:"/add-account/import/",component:Et,meta:{transitionName:"slide-vertical"}},{path:"/account/:address/",component:q,meta:{transitionName:"slide-vertical"},children:[{path:"",component:rt,meta:{transitionName:"slide",index:1}},{path:"send",component:it,meta:{transitionName:"slide",index:2}},{path:"sign",component:lt,meta:{transitionName:"sign",index:3}},{path:"history",component:gt,meta:{transitionName:"slide",index:4}},{path:"export",component:zt,meta:{transitionName:"slide"}},{path:"remove",component:Yt.exports,meta:{transitionName:"slide"}}]}],Gt={name:"Button",props:["text","primary","loading"],data:function(){return{}}},Jt=(n(309),n(311),Object(y.a)(Gt,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"btn",class:{primary:this.primary,loading:this.loading}},[this._v("\n  "+this._s(this.text)+"\n")])},[],!1,null,null,null));Jt.options.__file="Button.vue";var qt=Jt.exports,Wt=n(138);function Xt(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function Zt(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function te(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){Zt(o,a,r,s,i,"next",t)}function i(t){Zt(o,a,r,s,i,"throw",t)}s(void 0)})}}var ee={namespaced:!0,state:{addresses:[],accounts:{},txs:{}},getters:{},actions:{getAccounts:function(){var t=te(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Object(p.a)(this._vm.$background.getAccounts)();case 3:return a=t.sent,console.log("got accounts",a),n("setAccounts",a),t.abrupt("return",a);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),createAccount:function(){var t=te(regeneratorRuntime.mark(function t(e,n){var a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.commit,r=n.network,t.next=4,Object(p.a)(this._vm.$background.createAccount)({chainId:r});case 4:return o=t.sent,a("addAccount",o),t.abrupt("return",o);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),importAccount:function(){var t=te(regeneratorRuntime.mark(function t(e,n){var a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.commit,r=n.identity,o=n.network,t.next=4,Object(p.a)(this._vm.$background.importAccount)({privateKey:Array.from(r.privateKey),chainId:o});case 4:return s=t.sent,a("addAccount",s),t.abrupt("return",s);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),exportAccount:function(){var t=te(regeneratorRuntime.mark(function t(e,n){var a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Xt(e),a=n.chainId,r=n.address,o=n.password,t.next=4,Object(p.a)(this._vm.$background.exportAccount)({address:r,chainId:a,password:o});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),loadAccount:function(){var t=te(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Xt(e),a=n.address,r=n.chainId,t.next=4,Object(p.a)(this._vm.$background.syncAccountState)({address:a,chainId:r});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),getAccountTx:function(){var t=te(regeneratorRuntime.mark(function t(e,n){var a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.commit,r=n.address,o=n.chainId,t.next=4,Object(p.a)(this._vm.$background.getAccountTx)({address:r,chainId:o});case 4:return s=t.sent,a("setAccountTxs",{address:r,txs:s}),t.abrupt("return",s);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),addNetwork:function(){var t=te(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Xt(e),a=n.chainId,r=n.nodeUrl,t.next=4,Object(p.a)(this._vm.$background.addNetwork)({chainId:a,nodeUrl:r});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},mutations:{setAccounts:function(t,e){t.addresses=e.map(function(t){return t.key});var n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;t.accounts[i.key]=i}}catch(t){a=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}},addAccount:function(t,e){t.accounts[e.key]=e,t.addresses.push(e.key)},setAccount:function(t,e){t.accounts[e.key]=e},setAccountTxs:function(t,e){var n=e.address,a=e.txs;t.txs[n]=a}}},ne={namespaced:!0,state:{currentPath:"",previousPath:"",activeAccount:{}},getters:{},actions:{setCurrentRoute:function(t,e){(0,t.commit)("setCurrentPath",e.fullPath)},setActiveAccount:function(t,e){(0,t.commit)("setActiveAccount",e)}},mutations:{setCurrentPath:function(t,e){t.previousPath=t.currentPath,t.currentPath=e},setActiveAccount:function(t,e){e!==t.activeAccount&&(t.activeAccount=e)}}};d.a.use(v.a);var ae=new Wt.a({key:"vuex",storage:window.localStorage}),re=new v.a.Store({modules:{accounts:ee,navigation:ne},strict:!1,plugins:[ae.plugin]});function oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return(t=""+t)?t.length<=12?t:t.length>e?t.substr(0,e)+"...":t:"Contract Creation"}function se(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=t.toString().split(".");if(a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),a.length>1){var r=function(t){return t.split("").reverse().join("")};a[1]=r(r(a[1]).replace(/\B(?=(\d{3})+(?!\d))/g,n))}return a.join(".")}function ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],a=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done)&&(n.push(s.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ce=["aergo","gaer","aer"];function ue(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t=new H.Amount(t,"aer"),n)e=ie(t.toUnit(n).toString().split(" "),1)[0];else for(var a=0;;){if(n=ce[a++],e=ie(t.toUnit(n).toString().split(" "),1)[0],a>2||!e.match(/^0\.0{3,}/))break}e||(e="0");var r=se(e," "," ");return r=(r=r.replace(/\s/g,'<span class="sep"></span>')).replace(".",'<span class="point">.</span>'),'<span class="formatted-value token" title="'.concat(t,'"><span class="value">').concat(r,'</span> <span class="unit">').concat(n,"</span></span>")}function le(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var de=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&le(t.prototype,e),n&&le(t,n)}(t,null,[{key:"install",value:function(t,e){t.prototype.$background=e.background}}]),t}(),pe=n(73);function ve(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var fe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&ve(t.prototype,e),n&&ve(t,n)}(t,null,[{key:"install",value:function(t){t.prototype.$db=pe.a}}]),t}(),me={bind:function(t,e){-1===t.className.indexOf("tooltipped-")&&(t.className+=" tooltipped-s"),t.className+=" tooltipped tooltipped-no-delay",t.title=e.value,t.addEventListener("mouseover",function(e){t.setAttribute("aria-label",t.title)}),t.addEventListener("mouseout",function(e){t.setAttribute("aria-label","")})},update:function(t,e){t.title=e.value}};function he(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],a=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done)&&(n.push(s.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _e=function(t,e){var n=!0,a=new S.a({routes:t});return a.beforeEach(function(t,a,r){if("/"==t.fullPath&&n){n=!1;var o=e.state.navigation.currentPath;if(o&&o!=t.fullPath)return void r(o)}if(t.params.address)try{var s=ye(t.params.address.split("/"),2),i=s[0],c=s[1];e.dispatch("navigation/setActiveAccount",{chainId:i,address:c})}catch(t){console.error(t)}"/locked"!=t.fullPath&&e.dispatch("navigation/setCurrentRoute",t),r()}),a};function ge(t){return we.apply(this,arguments)}function we(){return(we=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){he(o,a,r,s,i,"next",t)}function i(t){he(o,a,r,s,i,"throw",t)}s(void 0)})}}(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:d.a.use(S.a),d.a.use(de,{background:e.background}),d.a.use(fe),d.a.component("Button",qt),d.a.filter("shortAddress",oe),d.a.filter("formatToken",ue),d.a.filter("formatNumber",se),d.a.directive("tooltip",me),n=_e(Qt,re),new d.a({el:"#app",render:function(t){return t(P)},router:n,store:re}).$background.on("update",function(t){console.log("there is an update from the background"),console.log(t),t.hasOwnProperty("unlocked")&&!t.unlocked&&n.push("/locked")}),d.a.config.devtools=!0;case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function be(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}var xe=document.getElementById("app").getAttribute("data-name");function ke(){return(ke=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){be(o,a,r,s,i,"next",t)}function i(t){be(o,a,r,s,i,"throw",t)}s(void 0)})}}(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.a.runtime.connect({name:xe}),n=new s.a(e),t.next=4,l(n);case 4:ge({background:t.sent});case 6:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}!function(){ke.apply(this,arguments)}()},35:function(t,e,n){"use strict";var a={props:["size"]},r=(n(288),n(0)),o=Object(r.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"spinner",attrs:{width:this.size,height:this.size,viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"6","stroke-linecap":"round",cx:"33",cy:"33",r:"30"}})])},[],!1,null,null,null);o.options.__file="Spinner.vue";e.a=o.exports},4:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var a=Symbol("util.promisify.custom");function r(t,e){if(void 0===e&&(e=this),"function"!=typeof t)throw new Error("original","Function",t);function n(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return new Promise(function(n,r){t.call.apply(t,[e].concat(a,[function(t){n(t)}]))})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperty(n,a,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,Object.getOwnPropertyDescriptors(t))}},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){},54:function(t,e,n){},55:function(t,e,n){},56:function(t,e,n){"use strict";(function(t){var a=n(6),r=n(4),o=n(16),s=(n(18),n(34)),i=n(35);function c(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function s(t){c(o,a,r,s,i,"next",t)}function i(t){c(o,a,r,s,i,"throw",t)}s(void 0)})}}e.a={data:function(){return{transaction:{to:"",amount:"0",nonce:1,amountUnit:"aergo",payload:"",uiType:""},signedTx:null,error:"",status:"initial",lastTxHash:null,payloadFormState:"hidden",payload:{action:"",subAction:"b",name:"",newOwner:"",voteTo:""},slowQuery:!1,amountFixed:!1,stakedAmount:"..."}},created:function(){},mounted:function(){this.cancel()},beforeDestroy:function(){this.cancel()},computed:{address:function(){return this.$route.params.address&&this.$route.params.address.split("/")[1]},chainId:function(){return this.$route.params.address&&this.$route.params.address.split("/")[0]}},watch:{"transaction.to":function(t){var e=this;this.amountFixed=!1,"aergo.name"===t?(this.payloadFormState="name",this.transaction.amount="1",this.amountFixed=!0):"aergo.system"===t?(this.payloadFormState="system","..."===this.stakedAmount&&Object(r.a)(this.$background.getStaking)({chainId:this.chainId,address:this.address}).then(function(t){t.amount&&(e.stakedAmount=new a.Amount(t.amount).toUnit("aergo").toString())})):"system"!==this.payloadFormState&&"name"!==this.payloadFormState||(this.payloadFormState="hidden")},"transaction.uiType":function(t,e){""!==t&&(this.transaction.to=t),""===t&&this.transaction.to===e&&(this.transaction.to=""),"aergo.name"!==t&&"aergo.name"===e&&(this.transaction.amount="0"),t!==e&&(this.payload.action="")},"payload.action":function(t){"aergo.system"==this.transaction.to&&"v"==t?(this.transaction.amount="0",this.amountFixed=!0):"aergo.system"==this.transaction.to&&(this.amountFixed=!1)},"payload.name":function(t){"name"===this.payloadFormState&&t.length>12?this.error="Name is too long (max. 12 characters)":"name"===this.payloadFormState&&this.error&&(this.error="")}},methods:{addPayload:function(){this.payloadFormState="manual"},startConfirm:function(){var e=u(regeneratorRuntime.mark(function e(){var n,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return t.from(JSON.stringify(e))},this.error="",a=this.transaction.amount.replace(/[^\d\.]/g,""),r=t.from(this.transaction.payload),o=0,"name"!==this.payloadFormState){e.next=14;break}if(12==this.payload.name.length){e.next=9;break}return this.error="Name has to be 12 alphanumeric characters (currently ".concat(this.payload.name.length,")"),e.abrupt("return");case 9:"c"==this.payload.action&&(r=n({Name:"v1createName",Args:[this.payload.name]})),"u"==this.payload.action&&(r=n({Name:"v1updateName",Args:[this.payload.name,this.payload.newOwner]})),o=1,e.next=15;break;case 14:"system"===this.payloadFormState&&("s"==this.payload.action&&(r=n({Name:"v1stake",Args:[]})),"u"==this.payload.action&&(r=n({Name:"v1unstake",Args:[]})),"v"==this.payload.action&&"b"==this.payload.subAction&&(r=n({Name:"v1voteBP",Args:this.payload.voteTo.split(",")})),"v"==this.payload.action&&"p"==this.payload.subAction&&(r=n({Name:"v1voteDAO",Args:this.payload.voteTo.replace(/\s+/g,"").split(",")})),o=1);case 15:r=Array.from(r),s={chainId:this.chainId,from:this.address,fromAdr:this.address,to:this.transaction.to,amount:"".concat(a," ").concat(this.transaction.amountUnit),payload:r,type:o},this.signedTx=s,console.log(s),this.status="confirm";case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),confirm:function(){var t=u(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.status="sending",t.next=3,Object(s.a)(function(){return Object(r.a)(n.$background.sendTransaction)(n.signedTx,n.signedTx.chainId)},{fastTime:1e3,slowTime:5e3,slow:function(){n.slowQuery=!0}});case 3:"tx"in(e=t.sent)?(this.lastTxHash=e.tx.hash,console.log("tx sent",this.lastTxHash,this.signedTx),this.status="success"):"error"in e?(this.error=e.error,this.status="error",console.error("failed to send tx",error)):console.log(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(){Object.assign(this.$data,{transaction:{to:"",amount:"0",nonce:1,amountUnit:"aergo",payload:"",uiType:""},signedTx:null,error:"",status:"initial",lastTxHash:null,payloadFormState:"hidden",payload:{action:"",subAction:"b",name:"",newOwner:"",voteTo:""},slowQuery:!1,amountFixed:!1,stakedAmount:"..."})}},components:{Identicon:o.a,Spinner:i.a}}}).call(this,n(3).Buffer)},57:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){"use strict";(function(t){var a=n(4);n(6),n(18),n(34),n(35);function r(t,e,n,a,r,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,r)}e.a={data:function(){return{message:"",signedMessage:"",error:""}},created:function(){},beforeDestroy:function(){},computed:{address:function(){return this.$route.params.address&&this.$route.params.address.split("/")[1]},chainId:function(){return this.$route.params.address&&this.$route.params.address.split("/")[0]}},methods:{sign:function(){var e=function(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var s=t.apply(e,n);function i(t){r(s,a,o,i,c,"next",t)}function c(t){r(s,a,o,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status="sending",this.signedMessage="",this.error="",n=t.from(this.message),"0x"!==this.message.substr(0,2)){e.next=13;break}e.prev=5,n=t.from(this.message.substr(2),"hex"),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(5),this.error=""+e.t0,e.abrupt("return");case 13:return e.next=15,Object(a.a)(this.$background.signMessage)({address:this.address,chainId:this.chainId,message:Array.from(Uint8Array.from(n))});case 15:(r=e.sent).error?this.error=r.error:this.signedMessage="0x"+r.signedMessage;case 17:case"end":return e.stop()}},e,this,[[5,9]])}));return function(){return e.apply(this,arguments)}}(),cancel:function(){this.message="",this.signedMessage=""}},components:{}}}).call(this,n(3).Buffer)},60:function(t,e,n){},62:function(t,e,n){},63:function(t,e,n){},64:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){}});
//# sourceMappingURL=popup.js.map